c
User.all
c
@admin
c
User.all
User.destroy_all
User.all
@admin
c
user
user.is_admin?
user.is_admin
c
@user
c
@admin
c
expect(response).to have_http_status(:success)
      expect(response).to have_http_status(:success)
      expect(response).to redirect_to(products_url)
request
request.referrer
response
c
params[:session]
params = {session: {email: user.email, password: user.password, password_digest: user.password_digest}}
params: {session: {email: user.email, password: user.password, password_digest: user.password_digest}}
c
user.password
user.email
user
c
user.password
user
c
user.password
user
user.password
  user = User.find_by(email: user.email.downcase)
c
  user = User.find_by(email: user.email.downcase)
  user = User.find_by(email: params[:session][:email].downcase)
user
c
post :create, params: {session: {email: user.email, password: user.password, password_digest: user.password_digest}}
User.all
user
c
user.password
user.email
user
c
cc
c
cc
c
!current_user && !current_user.is_admin
